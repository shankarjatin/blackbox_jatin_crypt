<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Input Example</title>
    <link rel="stylesheet" href="public/css/forms.css">
    <script src ="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>
  </head>
  <body>
    <li><a href="/game">crypthunt</a></li>
    <li><a href="/blackbox_leaderboard">Blackbox Leaderboard</a></li>
    <li><a href="/leaderboard">Cryphunt Leaderboard</a></li>
    <li> <a href="/final-leaderboard">Overall Leaderboard</a></li>
    <h1>You are on Level <%= question.level %>!</h1>
    <h1>Enter Values</h1>

  
    <div id="gamediv">
      <div id="outercountdown">
          <div>
              <div class="count">TIME LEFT</div>
              <div class="count countdown">3 : 0 : 0</div>
          </div>
      </div>
      
    <form action="/black_ques" method="POST">
      <% for(let i = 1; i<= question.no_of_variables ; i++){ %>
      <label for="num<%- i %>">Number <%- i %>:</label>
      <input type="number" name="num<%- i %>" id="num<%- i %>"><br><br>
    <% } %>
    <button  type="submit">check combination</button>     
    </form>

   
      <!-- <form action="/submit_blackbox" method="post"> -->
        <label for="submit_expression">enter your expression</label>
        <input type="text" name="user_expression" id="submit_expression"><br><br>
        <button onclick="submit()">submit expression</button>
        <p> instruction :<br> example input : a+b+c+d , (a*b)+c+d .<br> use a,b,c and d as variable !</p>
    <!-- </form> -->
    <script>
      async function submit(){
        url = "http://localhost:8000/submit_blackbox";
        const expression = document.getElementById("submit_expression").value;
        payload  = {"user_expression": `${expression}`};
        const res = await axios.post(url, payload);
        console.log(res);
        if(res.data.redirect == false){
          alert(res.data.message);
          window.location.reload()
        }else{}
      }
    </script>
       



        <% if (user.Array.length > 0) { %>
          <ul>
            <% user.Array.forEach(element => { %>
              <li><%= element %></li>
            <% }); %>
          </ul>
        <% } %>

        

    <% if (message != "None") { %>
      <script>alert("<%-message%>")</script>
  <% } %>
  
  <% if (remaining_time != "None") { %>
      <script>



          let timer=document.getElementsByClassName("countdown");
          for(let i=0;i<=timer.length-1;i++)
          {
              let time= Math.floor( Number("<%-remaining_time%>")/1000);
              setInterval(updatecountdown,1000);
              function updatecountdown(){
              let hours=Math.floor(time/3600);
              let minutes=Math.floor((time%3600)/60);
              let seconds=Math.floor(time-3600*hours-60*minutes);
              if(time<0){
                  timer[i].innerHTML = `00 : 00 : 00`;
                  window.location = "/submit";
              } else {
                  timer[i].innerHTML = `${hours} : ${minutes} : ${seconds}`;
              }
              time--;
              }
          }
      </script>
  <% } else { %>
  <% } %> 



  </body>
</html>