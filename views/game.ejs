<%- include("./partials/header.ejs",{name:'triyon'}); %>
    <script>
        function createUL(Array) {
            div = document.getElementById("hint_id")
            div.innerHTML = "";
            const ul = document.createElement("ul");
            if (Array.length == 0) {
                const li = document.createElement("li");
                const text = document.createTextNode("No Hints to Show");
                li.appendChild(text);
                ul.appendChild(li);
            }
            else {
                for (let i = 0; i < Array.length; i++) {
                    const li = document.createElement("li");
                    const text = document.createTextNode(Array[i].hint);
                    li.appendChild(text);
                    ul.appendChild(li);
                }
            }
            div.appendChild(ul);
        }
        function hintClick() {
            payload = { game: "Crypthunt", level: "<%-user.level%>" }
            console.log(payload)
            axios.post("/get_hints", payload).then(res => {
                console.log(res.data.result);
                createUL(res.data.result)
            })
        }
    </script>

    <div id="blur_crpthuntdiv">

        <div id="gamediv">
            <div id="outercountdown">


                <div class="countdown-timer countdown">00:00:00</div>

            </div>

            <h1 id="rulesheading">Level # <%-user.level%></h1>
            <!-- <div id="smallcount">
            <div id="counter">TIMS LEFT  
                </div>
                <div
                class="countdown">0 : 0 : 0</div>
    
        </div> -->
            <div id="gameoutdiv">
                <div id="" class="ch-game-box">

                    <img src="private/r<%-user.level%>.png" />
                </div>
            </div>
            <form method="POST" id="formdiv">
                <div id="divform">
                    <input class="form-control" type="text" name="answer" placeholder="Answer" id="gameanswer">

                    <div class="">
                        <button class="ch-check-btn" type="submit" formaction="/game">Check</button>
                    </div>


                </div>
            </form>
        </div>
    </div>
    </div>

    <% if (message !="None" ) { %>
        <script>alert("<%-message%>")</script>
        <% } else { %>
            <% } %>

                <% if (remaining_time !="None" ) { %>
                    <script>
                        let timer = document.getElementsByClassName("countdown");
                        for (let i = 0; i <= timer.length - 1; i++) {
                            let time = Math.floor(Number("<%-remaining_time%>") / 1000);
                            setInterval(updatecountdown, 1000);
                            function updatecountdown() {
                                let hours = Math.floor(time / 3600);
                                let minutes = Math.floor((time % 3600) / 60);
                                let seconds = Math.floor(time - 3600 * hours - 60 * minutes);
                                if (time < 0) {
                                    timer[i].innerHTML = `00 : 00 : 00`;
                                    window.location = "/submit";
                                } else {
                                    timer[i].innerHTML = `${hours} : ${minutes} : ${seconds}`;
                                }
                                time--;
                            }
                        }
                    </script>
                    <% } else { %>
                        <% } %>

                            <%- include("./partials/footer.ejs"); %>